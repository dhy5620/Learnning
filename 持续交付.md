# 持续交付

## 一、持续交付2.0

### 1.1 软件工程发展

#### 1、瀑布软件开发

瀑布软件开发方法是将软件开发过程定义为多个阶段，每个阶段均有严格的输入和输出标准，项目管理者希望通过这种重计划、重流程、 重文档的方式来解决软件危机。很多人将具有以上 3 个特征的软件开发方法统称为“重型软件开发方法”。

![img](https://img-blog.csdnimg.cn/img_convert/0dfd5237532bdf86f7d54bbec4ebd7c4.png)

#### 2、敏捷软件开发

敏捷软件开发方法强调发挥人的主观能动性，提倡面对面沟通、拥抱变化、通过迭代和增量开发尽早交付有价值的软件。此时，很多团队已认识到，软件开发实际上是一个不断迭代学习的过程，即软件工程师需要快速学习并理解领域知识，并将其转化成数字世界的表达形式，通过与业务专家的交流讨论来学习并持续迭代这个过程。一个软件交付计划被划分成多个迭代，强调在每个迭代结束时应该得到可运行的软件。

![img](https://img-blog.csdnimg.cn/img_convert/d40aab8f9a8d1532f2b22e8f44c432ae.png)



#### 3、DevOps发展

DevOps 的目标是缩短开发周期，提高部署频率和更可靠地发布，与业务目标保持一致。

DevOps并非一个标准、一种模式或者一套固定方法，而是一种 IT 组织管理的发展趋势，也就是说，通过多种方式打破 IT 职能部门之间的隔阂，改变 IT 组织内部的原有合作模式，使之更紧密结合，从而促进业务迭代速度更快。** 这种发展趋势将会引起 IT 组织内部原有角色与分工的变化，甚至范围更大，会影响到相关的业务组织。对互联网公司来说，其软件产品对业务发展起到极其关键的作用，业务结果与 IT 效能强关联，因此顺应这一发展趋势的动力更加明显和迫切。

#### 4、持续交付1.0

部署流水线：

每个隔间阶段都应该交付可工作的软件，中间产物的生成不应该是独立的阶段。（绿厂互联网的流水线建设）
同一个制品向不同类型的环境部署，且运行时的配置分开管理。（Apollo）
自动化测试和部署，根据测试的目的，分为几个独立的质量关卡。（流水线测试卡点）
部署生产线设计应随着应用程序的发展而不断演进。

![img](https://img-blog.csdnimg.cn/301a15fd4bbe461797a080416dbe85dc.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NtYXJ0enpn,size_16,color_FFFFFF,t_70#pic_center)

组织角色触达：

![img](https://img-blog.csdnimg.cn/5e29dc0a7641400f85b34849f6d154b5.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NtYXJ0enpn,size_16,color_FFFFFF,t_70#pic_center)

#### 5、持续交付与持续部署。

部署是技术领域的，交付是业务决策。交付可理解为上线、发布，部署可能有多次，而在业务需要时，才会交付。

### 1.2 持续交付2.0

“持续交付 1.0” 关注于“从提交代码到产品发布”的过程，但是，一些软件功能在开发完成之后，对用户或者业务来说，并没有产生什么影响，有些功能根本没有用户来使用。可是，这些功能的确花费了团队的很多精力才设计实现。这是一种巨大的浪费。这种“无用”的功能生产得越多，浪费就越大。

**我们是否可以找到一些方法，让我们付出的努力对业务改善更加有效，或者只用很少的成本就可以验证对业务无效呢？**

#### 1、精益思想

《精益创业》的核心理念是开发新产品时，先做出一个简单的原型 - 最小化可行产品（Minimum Viable Product, MVP ），原型的目标不是马上产出一个完美的产品，而是为了验证商业假设，得到用户反馈后，持续迭代，快速修正。

精益思想是指导企业根据用户需求，定义企业生产价值，按照价值流来组织全部生产活动，使价值在生产活动之间流动起来，由需求拉动产品的生产，从而识别整个生产过程中不经意间产生的浪费，并消除之。

在精益管理理论中，“浪费”是指从客户角度出发，对优质产品与良好服务不增加价值的生产活动或管理流程。例如，无效果的功能特性、没人看的文档、软件缺陷、机械性的重复工作等。

尽管“消除所有浪费”几乎是不可能的，但是，我们仍旧要全面贯彻“识别和消除一切浪费”的理念，持续不断地优化流程与工作方式，达到高质量、低成本、无风险地快速交付客户价值的目的。

#### 2、双环模型【★】

“持续交付 2.0” 是一种产品研发管理思维框架。它将精益创业与 “持续交付 1.0” 相结合，强调业务与 IT 间的快速闭环，以“精益思想”为指导，全面贯彻“识别和消除一切浪费” 的理念，通过一系列工作原则与实践，帮助企业以一种可持续方式，高质量、低成本、无风险地快速交付客户价值。

对企业来说，开发软件产品的目标是创造客户价值。因此，我们不应该仅仅关注快速开发软件功能，同时还应该关注我们所交付的软件的业务正确性，以及如何以有限的资源快速验证和解决业务问题。也就是说，不断探索发现真正要解决的业务问题，提出科学的目标，设计最小可行解决方案。通过快速实现解决方案并从真实反馈中收集数据，以验证该问题是否得以解决。这是一个从业务问题出发，到业务问题解决的完整业务闭环，简称为持续交付 “8” 字环。

![img](https://img-blog.csdnimg.cn/img_convert/ef9e5eec87f50e0850db5f3e807009a2.png)

##### 探索环：

提问，即定义问题。通过有针对性行的提问，找出用户具体需求，并找出具体需求后的原因，即要解决的根本问题。
锚定，即定义结果目标指示器。经过分析，去除干扰信息，得到适当的衡量指标，并表述现在的状况和行动预期的结果。
共创，制定目标后，团队设法验证或者达成目标，而探索多种可行性解决方案。
精炼，即对所有的可行方案进行选择，找到最小可行性解决方案（单个或者多个混合）。

##### 验证环：

构建，最小可行性解决方案转化为符合质量需求的软件包。
运行，部署到生产环境或者交到用户手中，并使之为用户提供服务。
检测，生产系统的系统和数据监控，保证运行，并将业务数据以适当的形式展示。
决策，数据分析与目标对比，决策下一步方向。

探索环就像是一部车子的前轮，把握前进方向。验证环则像车子的后轮，使车子平稳且驱动快速前进。它们之间相互促进，探索环产生的可行性方案规模越小，越能够提高验证环的运转速度，如果价值验证环能够提高运转速度，则有利于探索环尽早得到真实反馈，有利于快速决策，及时对前进方向进行验证或调整。

#### 3、四个核心原则：

1. **坚持少做** - 无论公司实力如何，想做的事情永远超过自己的交付能力，需求永远做不完。然而，做得多就一定有效吗？我们应该抵住“通过大量计划来构建最佳功能”的诱惑，坚持少做，想办法对新创意尽早验证。
2. **持续分解问题** - 复杂的业务问题中一定会包含很多不确定因素，它们会影响问题解决的速度和质量。在实施解决方案之前，通过对问题的层层分解，可以让团队更了解业务，更早识别出风险。企业应该坚信，即便是很大的课题或者大范围的变更，也可以将其分解为一系列小变更，快速解决，并得到反馈，从而尽早消除风险。与其设计一大堆特性，再策划一个持续数月的一次性发布，不如持续不断地尝试新想法，并各自独立发布给用户。
3. **坚持快速反馈** - 当把问题分解以后，如果我们仍旧只是一味地埋头苦干，而忽视对每项已完成工作的结果反馈，那么就失去了由问题分解带来的另一半收益，确认风险降低或解除。只有通过快速反馈，我们才能尽早了解所完成工作的质量和效果。
4. **持续改进并衡量** - 无论做了什么样的改进，如果无法以某种方式衡量它的结果，就无法证明真的得到了改进。在着手解决每个问题之前，我们都要找到适当的衡量方式，并将其与对应的功能需求放在同等重要的位置上，一起完成。

## 二、价值探索环

### 2.1 探索环的意义

#### 探索环的目标与价值假设

就是持续事变和定义这些有价值的假设，选择并验证其中风险最高的或者最易验证的价值假设，并截止价值验证环得到数据反馈，以便深入理解用户需求，把我业务前进方向。假设来源：

用户假设：潜在用户的需求假设
问题假设：问题点痛点的需求假设
解决方案假设：提供的方案可以解决这些痛点或问题点，且比其他方案高效

EG：持续交付工具GoDC，设计200多个功能特性，一半都废弃掉，说明假设的不成立。该产品实际一直秉承“持续交付2.0”，调整功能策略，实现成功。

### 2.2 探索环的四个关键

#### 1、提问

不断提问，澄清客户需求背后真正要实现的目标。

EG：举办DevOps的沙龙，客户要咖啡。问了一堆要什么口味的咖啡、多热的咖啡、什么时间、中杯大杯。

其实问的都是“做什么”和“怎么做”，而没有去问及原因。客户真正的诉求是担心困意而错过听讲。此时，我们的解决方案有多种，比如录制视频，即使参与者中途离场，也可以回顾内容。

##### 2、锚定

避免模糊不清的目标，这样会影响团队的交流。清晰的描述目标让我们知道自己当前的位置，清晰的目标是具体且可衡量的，有时间限定。若没有时间限定，则将会成为一个愿景，无法直接知道企业日常生产管理的活动。

EG：某App用户量当前为20万，年底愿景为200万。

所以我们可以根据新闻信息流服务（Feed流），我们期望用户喜欢该App，那么可以推断：

用户会阅读更多的内容，花费更长的时间
用户会将该产品推荐给朋友，而朋友也会喜欢并成为该产品的用户。
根据分析可以得出三个衡量指标：推荐朋友数、单位时间内的用户数、单个用户的平均使用时长。制定指标后，各个团队根据自身职责制定目标如：提高API的请求响应速度、后台稳定性等等。

目标选择应该尊新：

识别价值目标而非虚荣目标。
指标应该是可衡量且可获取，易于客观对比。

##### 3、共创

解决方案基于假定条件或者猜想，提供两种分析方法：

量化式影响地图（目标–角色–影响–方案–量化、Why-Who-How-What）。

EG：以20万到200万为例。涉及到的角色有App使用者、推广渠道、客服团队、产品研发和运营、内容提供商及更多角色。

以推广渠道商为例

影响：App的展示位置、App的曝光量、App审核速度
方案：购买展位、搜索优化、规范更新
量化：App的下载指标
用户陆行地图（可视化的方式，讲用户与产品或服务之间的活动按照业务流进行展示）

地图包含：用户接触点、接触阶段、用户痛点、用户情绪
制作步骤：定义用户、定义任务或阶段、用户与服务接触点的互动行为、用户的动机、用户心理
共创的两周

共创的两个陷阱、极端：分析瘫痪（过度分析，无法决策）、直觉决策（匆忙判断，直觉反应）

##### 4、精炼

筛选最小可行性方案。

### 2.3 工作原则

#### 1、分解快速验试错

与“一次到位式”的解决方式不同。采用低成本的快速验证，多次尝试，多种方法，多种成功方式。

#### 2、一次只验证一点

验证方案只是手段，非目标。

#### 3、允许失败

### 2.4、共创和精炼常用方法

#### 1、装饰窗方法

EG：提现的功能，产品为评估到实现周期较长，则可以线用一个虚假的按钮，如用户点击“提现”时，提示“功能未实现，请预留手机信息，实现后第一时间提心您”，从而收集用户点击意愿，快速收集用户反馈，决定是否做该功能。

#### 2、最小可行特性法

EG：还是提现的功能，可以提示“功能开通成功”，后台收集用户信息，通过人工财务方式，实现该功能，并不涉及到系统的开发。用来短时间内收集用户意愿，验证用户是否喜欢该功能。

#### 3、特区法

制定用户范围内进行试验，验证某个功能是否有效，不会影响特区意外的用户体验。一般用于资源有限、成本敏感的场景。

EG：还是提现的功能，按照装饰窗方法，若120个用户提交手机信息，功能实现后，可以根据120用户手机号发送短信，包含提现的连接，查看用户点击该链接完成提现的人数（如：33个商户提现成功，7个商户提现1次，1个商户提现8次）。

#### 4、定向探索法

是指某种特定行为的特定用户群体，依据改用户的具体行为模式，设计调查提纲，针对性探索其背后的动机。根据特区法的不同商户提现结果，分别设计调查问卷，理解用户行为。

#### 5、稻草人法

与装饰窗方法的区别是不开发任何真实功能，假装该功能已经实现。采用人工或其他方式，模拟实现，获得用户反馈。

#### 6、最小可行产品法

通常在产品0-1的过程中使用。如Zappos最早就是开发一个UI界面，然后用户下单后，手工发货。

## 三、快速验证环

### 3.1 验证环的目标

借助各种方法和工具，让质量可靠的解决方案以最快的速度达到客户手中，收集分析真实的反馈。

### 3.2 验证环的四个关键

1、构建：讲自然语言描述转换为计算机可以执行的软件。

“时间盒”管理法。涉及交付物、交付质量、截止时间，了解项目状态，风险并解决。
任务分解。持续交付2.0核心工作原则，包含需求拆分和开发任务拆分。
持续验证。每当完成意一项开发任务或者需求，立即对交付质量进行验证，而非多项交付一起验证。持续验证会耗费较高成本，可以采用“持续集成”或者“自动化测试”方式，降低回归成本。
2、运行：将软件包部署生产环境，并对外提供服务。

如何无感的升级版本是重要课题，主要矛盾在开发和运维之间。
3、监控：收集数据源并统计展示，及时发现生产问题和业务指标异常的数据。

4、决策：收集真实的业务数据反馈结果之后，根据探索环中确定的相应指标进行分析对比，验证是否符合最初预期。

### 3.3 工作原则

包含：质量内建、消除等待、尽量并行、检测一切。

1、质量内建。从生产过程的第一个环节开始，就注重产出物的质量，并在每个环节开展质量保证。与后期大规模检查概念完全相反。

2、消除等待。精益思想中关于“浪费”有定义，“等待”的本质就是非必要浪费。正确做法是扩大“瓶颈”的处理能力，本质解决为需求颗粒均匀化，构建各环节工作量相近的需求。 同时进行任务的自动化建设。

3、重复任务自动化。如测试环境搭建、回归测试、应用发布和部署，都可以通过优化流程和自动化措施降低事物性成本和人为造成的失误。

4、检测一切。检测收集数据，便于确认生产环境软件正常运行（应用健康检测），也便于收集有效业务数据，验证探索环的假设（业务健康假设）。
